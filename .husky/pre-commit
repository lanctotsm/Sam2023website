#!/bin/sh

# Quick smoke checks for the Lightsail CMS rewrite
# Full test suite runs in CI

set -e

echo "ğŸ” Running pre-commit checks..."

if [ -d "cms-backend" ]; then
  echo "ğŸ¹ Go tests (cms-backend)"
  (cd cms-backend && go test ./...)
else
  echo "âš ï¸  cms-backend not found, skipping Go tests"
fi

if [ -d "cms-frontend" ]; then
  echo "ğŸ§ª Next.js lint (cms-frontend)"
  if [ -d "cms-frontend/node_modules" ]; then
    (cd cms-frontend && npm run lint)
  else
    echo "âš ï¸  cms-frontend/node_modules missing, run npm install"
  fi
else
  echo "âš ï¸  cms-frontend not found, skipping frontend lint"
fi

echo "âœ… Pre-commit checks complete"
